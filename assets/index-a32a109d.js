import{A as K,B as Q,r as a,C as T,f as q,_ as Z,q as ee,n as U,a as b,o as _,c as f,b as k,w as x,d as s,x as R,z as F,t as V,v as E,F as N,g as S,h as W,y as te,D as se,G as ne,p as oe,l as le}from"./index-062c680d.js";import{s as z}from"./index-93ce57eb.js";const ae=typeof window<"u",ue=e=>typeof e=="string",B=()=>{};function ce(e){K()&&Q(e)}const H=ae?window:void 0;function ie(e){var c,u;const t=q(e);return(u=(c=t)===null||c===void 0?void 0:c.$el)!==null&&u!==void 0?u:t}function D(...e){let c,u,t,l;if(ue(e[0])?([u,t,l]=e,c=H):[c,u,t,l]=e,!c)return B;let i=B;const v=T(()=>q(c),r=>{i(),r&&(r.addEventListener(u,t,l),i=()=>{r.removeEventListener(u,t,l),i=B})},{immediate:!0,flush:"post"}),m=()=>{v(),i()};return ce(m),m}function re(e={}){const{touch:c=!0,resetOnTouchEnds:u=!1,initialValue:t={x:0,y:0},window:l=H}=e,i=a(t.x),v=a(t.y),m=a(null),r=d=>{i.value=d.pageX,v.value=d.pageY,m.value="mouse"},h=()=>{i.value=t.x,v.value=t.y},p=d=>{d.touches.length>0&&(i.value=d.touches[0].clientX,v.value=d.touches[0].clientY,m.value="touch")};return l&&(D(l,"mousemove",r,{passive:!0}),c&&(D(l,"touchstart",p,{passive:!0}),D(l,"touchmove",p,{passive:!0}),u&&D(l,"touchend",h,{passive:!0}))),{x:i,y:v,sourceType:m}}function de(e,c={}){const{handleOutside:u=!0,window:t=H}=c,{x:l,y:i,sourceType:v}=re(c),m=a(e!=null?e:t==null?void 0:t.document.body),r=a(0),h=a(0),p=a(0),d=a(0),g=a(0),y=a(0),w=a(!1);let L=()=>{};return t&&(L=T([m,l,i],()=>{const M=ie(m);if(!M)return;const{left:n,top:I,width:O,height:X}=M.getBoundingClientRect();p.value=n+t.pageXOffset,d.value=I+t.pageYOffset,g.value=X,y.value=O;const P=l.value-p.value,C=i.value-d.value;w.value=P<0||C<0||P>y.value||C>g.value,(u||!w.value)&&(r.value=P,h.value=C)},{immediate:!0})),{x:l,y:i,sourceType:v,elementX:r,elementY:h,elementPositionX:p,elementPositionY:d,elementHeight:g,elementWidth:y,isOutside:w,stop:L}}var $;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})($||($={}));function ve(e){return z({url:"/Product/GetProductPublic?id="+e,method:"get"})}function _e(e){return z({url:"/ProductComment/GetProductCommentList?role=20&productid="+e,method:"get"})}const G=e=>(oe("data-v-1f693a6b"),e=e(),le(),e),me={class:"box"},pe=G(()=>s("h2",null,"评论区",-1)),fe={class:"oneDiv"},he=["src"],ge={style:{width:"100%"}},ye=G(()=>s("h3",{class:"colorff4466"},"品牌描述：",-1)),Ie=["innerHTML"],be=G(()=>s("h3",{class:"colorff4466"},"商品展示：",-1)),ke=["src"],xe={class:"twoDiv"},we=["src","onClick"],Pe={key:0},Ce={class:"headerBox"},Le={class:"headerLeft"},Xe=["src"],Ye={class:"headerRight"},Ee={key:0},Ne=["src"],Se=["src"],De={__name:"index",setup(e){const c=ee(),u=a([]),t=a([]),l=a(""),i=a(),v=a(""),m=a("@/assets/images/empty.png"),r=a(!1),h=U({top:0,left:0}),p=U({backgroundPositionX:0,backgroundPositionY:0}),d=a(null),{elementX:g,elementY:y,isOutside:w}=de(d);T([g,y,w],()=>{r.value=!w.value;const n={X:0,Y:0};g.value<100?n.X=0:g.value>250?n.X=150:n.X=g.value-100,y.value<100?n.Y=0:y.value>300?n.Y=200:n.Y=y.value-100,h.left=n.X+"px",h.top=n.Y+"px",p.backgroundPositionX=-2*n.X+"px",p.backgroundPositionY=-2*n.Y+"px"});const L=()=>{i.value=te.service({lock:!0,text:"Loading"})};return(()=>{L(),ve(c.query.id).then(({Data:n})=>{l.value=n.Banners[0].ImgSrc,v.value=n.Banners[0].ID,u.value=n}),_e(c.query.id).then(({Data:n})=>{t.value=n,i.value.close()})})(),(n,I)=>{const O=b("el-header"),X=b("el-divider"),P=b("el-tab-pane"),C=b("el-popover"),A=b("el-empty"),j=b("el-tabs"),J=b("el-main");return _(),f("div",me,[k(O,null,{default:x(()=>[pe]),_:1}),k(J,null,{default:x(()=>[s("div",fe,[s("div",{ref_key:"target",ref:d,class:"middleImage",onMouseenter:I[0]||(I[0]=o=>r.value=!0),onMouseleave:I[1]||(I[1]=o=>r.value=!1),onMousemove:I[2]||(I[2]=(...o)=>n.handleMouseMove&&n.handleMouseMove(...o))},[s("img",{src:l.value||m.value,alt:""},null,8,he),R(s("div",{class:"layer",style:V(h)},null,4),[[F,r.value]])],544),R(s("div",{class:"glassLook",style:V([{backgroundImage:`url(${l.value})`},p])},null,4),[[F,r.value]]),k(X,{direction:"vertical"}),s("div",ge,[k(j,{type:"border-card"},{default:x(()=>[s("h3",null,E(u.value.Name),1),k(P,{label:"商品详情"},{default:x(()=>[ye,s("p",{innerHTML:u.value.Describe},null,8,Ie),be,s("div",null,[(_(!0),f(N,null,S(u.value.Images,o=>(_(),f("img",{src:o.ImgSrc,alt:"",key:o.ID,class:"commodity",style:{display:"block"}},null,8,ke))),128))])]),_:1}),k(P,{label:"评论"},{default:x(()=>[s("div",xe,[(_(!0),f(N,null,S(u.value.Banners,o=>(_(),f("img",{src:o.ImgSrc,alt:"",key:o.ID,onClick:Y=>(l.value=o.ImgSrc,v.value=o.ID),class:se({pitchStyle:v.value==o.ID})},null,10,we))),128))]),t.value.length>=1?(_(),f("ul",Pe,[(_(!0),f(N,null,S(t.value,o=>(_(),f("li",{key:o.ID},[s("div",Ce,[s("div",Le,[s("img",{src:o.UserHeadUrl,alt:""},null,8,Xe),s("span",null,E(o.UserNickName),1)]),s("div",Ye,[s("p",null,E(o.Content),1),o.Images.length>=1?(_(),f("div",Ee,[(_(!0),f(N,null,S(o.Images,Y=>(_(),W(C,{placement:"bottom",width:400,trigger:"hover",key:Y.ID},{reference:x(()=>[s("img",{src:Y.ImgSrc,alt:""},null,8,Ne)]),default:x(()=>[s("img",{src:Y.ImgSrc,alt:"",style:{width:"400px",height:"400px"}},null,8,Se)]),_:2},1024))),128))])):ne("",!0),s("span",null,E(o.CommentDatetime.replace("T"," ")),1)])]),k(X)]))),128))])):(_(),W(A,{key:1,description:"暂无评论"}))]),_:1})]),_:1})])])]),_:1})])}}},Be=Z(De,[["__scopeId","data-v-1f693a6b"]]);export{Be as default};
